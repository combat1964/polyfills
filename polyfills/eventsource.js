!function(t){"use strict";function e(){this.data={}}function n(){this.listeners=new e}function o(t){setTimeout(function(){throw t},0)}function i(t){this.type=t,this.target=void 0}function r(t,e){i.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function s(t,e){var n=t;return n!==n&&(n=e),x>n?x:n>N?N:n}function a(t,e,n){try{"function"==typeof e&&e.call(t,n)}catch(i){o(i)}}function d(e,o){function d(){M=y,void 0!==B&&(B.abort(),B=void 0),0!==D&&(clearTimeout(D),D=0),0!==G&&(clearTimeout(G),G=0),L.readyState=y}function c(t){var n=M===m||M===g?B.responseText:"",o=void 0,c=!1;if(M===g){var u=0,v="",h=void 0;if(l)try{u=B.status,v=B.statusText,h=B.getResponseHeader("Content-Type")}catch(f){u=0,v="",h=void 0}else""!==t&&"error"!==t&&(u=200,v="OK",h=B.contentType);if((void 0===h||null===h)&&(h=""),0===u&&""===v&&"load"===t&&""!==n&&(u=200,v="OK",""===h)){var x=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(e);void 0!==x&&null!==x&&(h=x[1])}if(200===u&&C.test(h)){if(M=m,H=!0,q=O,L.readyState=m,o=new i("open"),L.dispatchEvent(o),a(L,L.onopen,o),M===y)return}else if(0!==u){var I="";I=200!==u?"EventSource's response has a status "+u+" "+v.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+h.replace(/\s+/g," ")+". Aborting the connection.",setTimeout(function(){throw new Error(I)},0),c=!0}}if(M===m){n.length>K&&(H=!0);for(var G=K-1,F=n.length,J="\n";++G<F;)if(J=n.charAt(G),U===E&&"\n"===J)U=T;else if(U===E&&(U=T),"\r"===J||"\n"===J){if("data"===k?X.push(z):"id"===k?$=z:"event"===k?j=z:"retry"===k?(O=s(Number(z),O),q=O):"heartbeatTimeout"===k&&(A=s(Number(z),A),0!==D&&(clearTimeout(D),D=setTimeout(P,A))),z="",k="",U===T){if(0!==X.length&&(R=$,""===j&&(j="message"),o=new r(j,{data:X.join("\n"),lastEventId:$}),L.dispatchEvent(o),"message"===j&&a(L,L.onmessage,o),M===y))return;X.length=0,j=""}U="\r"===J?E:T}else U===T&&(U=S),U===S?":"===J?U=w:k+=J:U===w?(" "!==J&&(z+=J),U=b):U===b&&(z+=J);K=F}M!==m&&M!==g||!("load"===t||"error"===t||c||K>1048576||0===D&&!H)?0===D&&(H=!1,D=setTimeout(P,A)):(c?d():(M=p,B.abort(),0!==D&&(clearTimeout(D),D=0),q>16*O&&(q=16*O),q>N&&(q=N),D=setTimeout(P,q),q=2*q+1,L.readyState=g),o=new i("error"),L.dispatchEvent(o),a(L,L.onerror,o))}function u(){c("progress")}function v(){c("load")}function x(){c("error")}e=e.toString();var I=h&&void 0!==o&&Boolean(o.withCredentials),O=s(1e3,0),A=s(45e3,0),R="",L=this,q=O,H=!1,B=new f,D=0,G=0,K=0,M=p,X=[],$="",j="",P=void 0,U=T,k="",z="";l&&(G=setTimeout(function F(){3===B.readyState&&c("progress"),G=setTimeout(F,500)},0)),P=function(){if(D=0,M!==p)return void c("");if(l&&(void 0!==B.sendAsBinary||void 0===B.onloadend)&&void 0!==t.document&&void 0!==t.document.readyState&&"complete"!==t.document.readyState)return void(D=setTimeout(P,4));B.onload=v,B.onerror=x,l&&(B.onabort=x,B.onreadystatechange=u),B.onprogress=u,H=!1,D=setTimeout(P,A),K=0,M=g,X.length=0,j="",$=R,z="",k="",U=T;var n=e.slice(0,5);n="data:"!==n&&"blob:"!==n?e+((-1===e.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(R)+"&r="+(Math.random()+1).toString().slice(2)):e,B.open("GET",n,!0),l&&(B.withCredentials=I,B.responseType="text",B.setRequestHeader("Accept","text/event-stream")),B.send(void 0)},n.call(this),this.close=d,this.url=e,this.readyState=g,this.withCredentials=I,this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,P()}function c(){this.CONNECTING=g,this.OPEN=m,this.CLOSED=y}e.prototype={get:function(t){return this.data[t+"~"]},set:function(t,e){this.data[t+"~"]=e},"delete":function(t){delete this.data[t+"~"]}},n.prototype={dispatchEvent:function(t){t.target=this;var e=t.type.toString(),n=this.listeners,i=n.get(e);if(void 0!==i)for(var r=i.length,s=-1,a=void 0;++s<r;){a=i[s];try{a.call(this,t)}catch(d){o(d)}}},addEventListener:function(t,e){t=t.toString();var n=this.listeners,o=n.get(t);void 0===o&&(o=[],n.set(t,o));for(var i=o.length;--i>=0;)if(o[i]===e)return;o.push(e)},removeEventListener:function(t,e){t=t.toString();var n=this.listeners,o=n.get(t);if(void 0!==o){for(var i=o.length,r=[],s=-1;++s<i;)o[s]!==e&&r.push(o[s]);0===r.length?n["delete"](t):n.set(t,r)}}},r.prototype=i.prototype;var u=t.XMLHttpRequest,v=t.XDomainRequest,h=void 0!==u&&void 0!==(new u).withCredentials,l=h,f=h?u:void 0!==v?v:void 0,p=-1,g=0,m=1,y=2,E=3,T=4,S=5,w=6,b=7,C=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,x=1e3,N=18e6;c.prototype=n.prototype,d.prototype=new c,c.call(d);var I=function(){if(void 0!==t.EventSource)try{var e=new t.EventSource("data:text/event-stream;charset=utf-8,");return e.close(),e.withCredentials===!1&&""!==e.url}catch(n){o(n)}return!1};void 0===f||I()||(t.NativeEventSource=t.EventSource,t.EventSource=d)}(this);